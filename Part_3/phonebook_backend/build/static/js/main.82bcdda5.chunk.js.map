{"version":3,"sources":["services/persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","errorMessage","successMessage","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setErrorMessage","setSuccessMessage","useEffect","personsService","initialPersons","filteredPersons","person","name","toLowerCase","startsWith","onChange","event","target","value","onSubmit","preventDefault","personObject","number","findPerson","find","undefined","window","confirm","returnedPerson","map","newPerson","concat","setTimeout","catch","error","type","key","onClick","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.82bcdda5.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  remove,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ errorMessage, successMessage }) => {\r\n  if (successMessage === null && errorMessage === null) {\r\n    return null;\r\n  } else if (successMessage !== null) {\r\n    return <div className=\"success\">{successMessage}</div>;\r\n  }\r\n\r\n  return <div className=\"error\">{errorMessage}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport personsService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personsService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    const findPerson = persons.find((person) => person.name === newName);\r\n    if (findPerson !== undefined) {\r\n      const updatePerson = window.confirm(\r\n        `${findPerson.name} already exists, replace the old number with a new one?`\r\n      );\r\n      if (updatePerson) {\r\n        personsService\r\n          .update(findPerson.id, personObject)\r\n          .then((returnedPerson) =>\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.id !== findPerson.id ? person : returnedPerson\r\n              )\r\n            )\r\n          );\r\n      }\r\n    } else {\r\n      personsService\r\n        .create(personObject)\r\n        .then((newPerson) => {\r\n          setPersons(persons.concat(newPerson));\r\n          setSuccessMessage(`${newPerson.name} was added to the server`);\r\n          setTimeout(() => {\r\n            setSuccessMessage(null);\r\n          }, 5000);\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessage(error.response.data);\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const filteredPersons = persons.filter((person) =>\r\n    person.name.toLowerCase().startsWith(filter.toLowerCase())\r\n  );\r\n\r\n  const deletePerson = (id) => {\r\n    let person = persons.find((person) => person.id === id);\r\n    let confirm = window.confirm(`Delete ${person.name} ?`);\r\n    if (confirm) {\r\n      personsService\r\n        .remove(id)\r\n        .then((response) =>\r\n          setPersons(persons.filter((person) => person.id !== id))\r\n        )\r\n        .catch((error) => {\r\n          setErrorMessage(`${person.name} was already deleted from the server`);\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification\r\n        errorMessage={errorMessage}\r\n        successMessage={successMessage}\r\n      />\r\n      <div>\r\n        filter shown with <input onChange={handleFilterChange} value={filter} />\r\n      </div>\r\n      <h2>add a new</h2>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input onChange={handleNameChange} value={newName} />\r\n        </div>\r\n        <div>\r\n          number: <input onChange={handleNumberChange} value={newNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n      <h2>Numbers</h2>\r\n      {filteredPersons.map((person) => (\r\n        <p key={person.id}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button onClick={() => deletePerson(person.id)}>delete</button>\r\n        </p>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}